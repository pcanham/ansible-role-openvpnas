---
- name: Enable ldap config
  command: /usr/local/openvpn_as/scripts/sacli --key "auth.module.type" --value "ldap" ConfigPut
- name: Set LDAP Name
  command: /usr/local/openvpn_as/scripts/sacli --key "auth.ldap.0.name" --value {{ ldap_realm }} ConfigPut
- name: Set LDAP Server
  command: /usr/local/openvpn_as/scripts/sacli --key "auth.ldap.0.server.0.host" --value "{{ ldap_server }}" ConfigPut
- name: Set LDAP BIND DN
  command: /usr/local/openvpn_as/scripts/sacli --key "auth.ldap.0.bind_dn" --value "{{ ldap_bind_dn }}" ConfigPut
- name: Set LDAP BIND DN Password
  command: /usr/local/openvpn_as/scripts/sacli --key "auth.ldap.0.bind_pw" --value {{ ldap_bind_pw }} ConfigPut
- name: Set LDAP User base DN
  command: /usr/local/openvpn_as/scripts/sacli --key "auth.ldap.0.users_base_dn" --value "{{ ldap_base_dn }}" ConfigPut
- name: Set LDAP User attribute
  command: /usr/local/openvpn_as/scripts/sacli --key "auth.ldap.0.uname_attr" --value sAMAccountName ConfigPut
- name: Set LDAP Additional Requirement (Member of Filtering)
  command: /usr/local/openvpn_as/scripts/sacli --key "auth.ldap.0.add_req" --value "{{ ldap_add_req }}" ConfigPut
